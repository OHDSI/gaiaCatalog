{
  "dct:title": "Tanzania 2022 Magu District (NBS)",
  "dct:creator": ["Tanzania National Bureau of Statistics"],
  "dct:identifier": "https://microdata.nbs.go.tz/index.php/catalog/49/related-materials",
  "dct:publisher": ["Tanzania National Bureau of Statistics"],
  "dct:rights": "Public Domain",
  "dct:coverage": ["Magu District, Tanzania"],
  "dct:temporal": ["2020-01-01", "2022-12-31"],
  "dct:type": "Vector Dataset",
  "dct:issued": "2024-01-01T00:00:00Z",
  "dct:description": "Shapefile of the Magu District in Tanzania derived from the Tanzania Districts from the 2022 Census",
  "prov:qualifiedAttribution": "Direct from source",
  "dcat:keyword": ["Tanania", "Districs", "Census"],
  "dct:language": "en",
  "adms:representationTechnique": "vector",
  "locn:geometry": "multipolygon",
  "dct:conformsTo": "EPSG:4326",
  "prov:action": "#########\n# GDSC ETL is performed in two steps: shell script to ETL data into postgres\n# and then additional transformations with SQL in postGIS (if needed).\n####\n\n#########\n# Step 1 - bash script (pseudo code)\n####\n\n# create directory structure and move into it\nmkdir -p /data/tz_2022_nbs_magu_district/{download,etl} && cd /data/tz_2022_nbs_magu_district\n\n# set update flag based on last update and update frequency\ndo_update=0 if date() < last_update + update_frequency else do_update = 1\n\n# Create copy of geom dependency\npg_dump -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h gaia-db -t tz_2022_nbs_districts | sed 's/tz_2022_nbs_districts/tz_2022_nbs_magu_district/g' | psql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h gaia-db \n\n# drop geom_local and subset as per custom parameters\npsql -d $POSTGRES_DB -U $POSTGRES_USER -p $POSTGRES_PORT -h gaia-db -c \"\nALTER TABLE tz_2022_nbs_magu_district DROP COLUMN IF EXISTS geom_local;\nDELETE FROM tz_2022_nbs_magu_district\n  WHERE NOT (reg_code = '19' AND dist_code = '02');\nCOMMIT;\"\n# add local geometry column and reproject existing geometries into local EPSG:\nSELECT AddGeometryColumn (\n  'tz_2022_nbs_magu_district',\n  'geom_local', 4326, 'multipolygon', 2\n);\nUPDATE tz_2022_nbs_magu_district\n  SET geom_local=ST_MakeValid(ST_RemoveRepeatedPoints(ST_Transform(ST_Multi(geom),4326)));\nCREATE INDEX tz_2022_nbs_magu_district_geom_local_idx\n  ON tz_2022_nbs_magu_district\n  USING GIST (geom_local);\nNOTIFY pgrst, 'reload schema';\n# Move into corrrect directory and create derivative directory in data package on osgeo\ncd /data/tz_2022_nbs_magu_district/\nmkdir -p derived\n\nexport PGPASSWORD=$(cat $POSTGRES_PASSWORD_FILE)\n# Create shapefile of table in derivate directory on osgeo \nogr2ogr -f \"ESRI Shapefile\" -overwrite derived/tz_2022_nbs_magu_district.shp PG:\"<postgres connection>\" tz_2022_nbs_magu_district\n\n# Create downloadable tarfile of shp in derivative directory on osgeo\nrm -f derived/tz_2022_nbs_magu_district.shp.tar.gz\ntar -czf derived/tz_2022_nbs_magu_district.shp.tar.gz meta_dcat_tz_2022_nbs_magu_district.json -C derived tz_2022_nbs_magu_district.shp tz_2022_nbs_magu_district.prj tz_2022_nbs_magu_district.shx tz_2022_nbs_magu_district.dbf\n\n# Move into correct directory\ncd /data/tz_2022_nbs_magu_district/\n\nexport PGPASSWORD=$(cat $POSTGRES_PASSWORD_FILE)\n",
  "prov:wasGeneratedBy": "GDSC automation (see Process Step)",
  "dcat:contactPoint": ["Timothy Norris", "Librarian Associate Professor", "University of Miami Libraries, Frost Institute for Data Science and Computing", "txn60@miami.edu"],
  "gdsc:label": "dist_name",
  "gdsc:value": ["dist_code", "reg_code", "reg_name"],
  "gdsc:attributes": ["dist_code", "dist_name", "reg_code", "reg_name"],
  "gdsc:collections": ["Tanzania Climate Change", "Tanzania Health Outcomes"],
  "gdsc:functions": ["gdsc_get_attributes"],
  "gdsc:analyticConformsTo": "EPSG:4326",
  "gdsc:derived": ["shp"],
  "dcat:accessURL": "/data/tz_2022_nbs_magu_district/",
  "gdsc:sponsor": ["IDSC;https://idsc.miami.edu", "Library;https://www.library.miami.edu"],
  "dcat:downloadURL": "tz_2022_nbs_districts",
  "gdsc:tablename": "tz_2022_nbs_magu_district",
  "dcat:qualifiedRelation": ["tz_2022_nbs_districts"],
  "gdsc:up": "true",
  "gdsc:podID": "gaia-db",
  "dct:modified": "0001-01-01T00:00:00Z",
  "dct:accrualPeriodicity": "As Needed",
  "gdsc:version": "2025-09-11T19:03:32Z",
  "spdx:checksum": "TBD",
  "dct:extent": ["0", "0"],
  "dcat:bbox": "ERROR"
}
