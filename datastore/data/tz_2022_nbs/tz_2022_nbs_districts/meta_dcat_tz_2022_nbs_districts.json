{
  "dct:title": "Tanzania 2022 Districts (NBS)",
  "dct:creator": ["Tanzania National Bureau of Statistics"],
  "dct:identifier": "https://microdata.nbs.go.tz/index.php/catalog/49/related-materials",
  "dct:publisher": ["Tanzania National Bureau of Statistics"],
  "dct:rights": "Public Domain",
  "dct:coverage": ["Tanzania"],
  "dct:temporal": ["2020-01-01", "2022-12-31"],
  "dct:type": "Vector Dataset",
  "dct:issued": "2024-01-01T00:00:00Z",
  "dct:description": "Shapefile for Tanzania Districts from the 2022 Census",
  "prov:qualifiedAttribution": "Direct from source",
  "dcat:keyword": ["Tanania", "Districs", "Census"],
  "dct:language": "en",
  "adms:representationTechnique": "vector",
  "locn:geometry": "multipolygon",
  "dct:conformsTo": "EPSG:4326",
  "prov:action": "#########\n# GDSC ETL is performed in two steps: shell script to ETL data into postgres\n# and then additional transformations with SQL in postGIS (if needed).\n####\n\n#########\n# Step 1 - bash script (pseudo code)\n####\n\n# create directory structure and move into it\nmkdir -p /data/tz_2022_nbs/{download,tz_2022_nbs_districts/etl} && cd /data/tz_2022_nbs\n\n# set update flag based on last update and update frequency\ndo_update=0 if date() < last_update + update_frequency else do_update = 1\n\n# download if update flag is set:\nif do_update == 1 then\nwget -O download/tz_2022_nbs.zip 'https://microdata.nbs.go.tz/index.php/catalog/49/download/317'\n\n# unzip to download directory if update flag is set\nif do_update == 1 then\nunzip -d download download/tz_2022_nbs.zip && rm download/tz_2022_nbs.zip\n\n# extract mpkx to download directory\n7z x download/TANZANIA_2022_POST_PHC_GEODATABASE.mpkx -o'download/TANZANIA_2022_POST_PHC_GEODATABASE'\n\n# load into postGIS with:\n  ogr2ogr -lco GEOMETRY_NAME=geom -f PostgreSQL PG:\"<postgres connection>\" download/TANZANIA_2022_POST_PHC_GEODATABASE/commondata/tanzania_2022phc_geodatabase.gdb Districts -nlt multipolygon -nln tz_2022_nbs_districts\n\n#########\n# Step 2 - SQL script (pseudo code):\n####\n\n# remove duplicate points and make geometries valid:\nUPDATE tz_2022_nbs_districts\n  SET geom=ST_MakeValid(ST_RemoveRepeatedPoints(geom));\n\n# add local geometry column and reproject existing geometries into local EPSG:\nSELECT AddGeometryColumn (\n  'tz_2022_nbs_districts',\n  'geom_local', 4326, 'multipolygon', 2\n);\nUPDATE tz_2022_nbs_districts\n  SET geom_local=ST_MakeValid(ST_RemoveRepeatedPoints(ST_Transform(ST_Multi(geom),4326)));\nCREATE INDEX tz_2022_nbs_districts_geom_local_idx\n  ON tz_2022_nbs_districts\n  USING GIST (geom_local);\nNOTIFY pgrst, 'reload schema';\n# Move into corrrect directory and create derivative directory in data package on osgeo\ncd /data/tz_2022_nbs/tz_2022_nbs_districts/\nmkdir -p derived\n\nexport PGPASSWORD=$(cat $POSTGRES_PASSWORD_FILE)\n# Create shapefile of table in derivate directory on osgeo \nogr2ogr -f \"ESRI Shapefile\" -overwrite derived/tz_2022_nbs_districts.shp PG:\"<postgres connection>\" tz_2022_nbs_districts\n\n# Create downloadable tarfile of shp in derivative directory on osgeo\nrm -f derived/tz_2022_nbs_districts.shp.tar.gz\ntar -czf derived/tz_2022_nbs_districts.shp.tar.gz meta_dcat_tz_2022_nbs_districts.json -C derived tz_2022_nbs_districts.shp tz_2022_nbs_districts.prj tz_2022_nbs_districts.shx tz_2022_nbs_districts.dbf\n\n# Move into correct directory\ncd /data/tz_2022_nbs/tz_2022_nbs_districts/\n\nexport PGPASSWORD=$(cat $POSTGRES_PASSWORD_FILE)\n",
  "prov:wasGeneratedBy": "GDSC automation (see Process Step)",
  "dcat:contactPoint": ["Timothy Norris", "Librarian Associate Professor", "University of Miami Libraries, Frost Institute for Data Science and Computing", "txn60@miami.edu"],
  "gdsc:label": "dist_name",
  "gdsc:value": ["dist_code", "reg_code", "reg_name"],
  "gdsc:attributes": ["dist_code;;;varchar;;;;", "dist_name;;;varchar;;;;", "reg_code;;;varchar;;;;", "reg_name;;;varchar;;;;"],
  "gdsc:collections": ["Tanzania Climate Change", "Tanzania Health Outcomes"],
  "gdsc:functions": ["gdsc_get_attributes"],
  "gdsc:analyticConformsTo": "EPSG:4326",
  "gdsc:derived": ["shp"],
  "dcat:accessURL": "/data/tz_2022_nbs/tz_2022_nbs_districts/",
  "gdsc:sponsor": ["IDSC;https://idsc.miami.edu", "Library;https://www.library.miami.edu"],
  "dcat:downloadURL": "https://microdata.nbs.go.tz/index.php/catalog/49/download/317",
  "gdsc:tablename": "tz_2022_nbs_districts",
  "gdsc:up": "true",
  "gdsc:podID": "gaia-db",
  "dct:modified": "2025-09-07T15:16:07Z",
  "dct:accrualPeriodicity": "As Needed",
  "gdsc:version": "2025-10-05T16:59:41Z",
  "spdx:checksum": "TBD",
  "dct:extent": ["326181252", "312M"],
  "dcat:bbox": "POLYGON((29.636010 -11.255900, 39.868100 -11.255900, 39.868100 -1.072270)\nExtent: (29.611330, 29.636010 -1.072270)\nExtent: (29.611330, 29.636010 -11.255900))"
}
